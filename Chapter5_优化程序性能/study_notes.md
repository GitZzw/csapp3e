## 总结：性能提高技术

### 1.高级设计

> 为遇到的问题选择适当的算法和数据结构。要特别警觉避免使用那些会渐进地产生糟糕性能地算法或编码技术

### 2.基本编码原则

> 避免限制优化的因素，编译器才能产生高效的代码

* 消除连续的函数调用。将计算移到循环之外；考虑有选择地妥协程序的模块性以获得更好的效率

* 消除不必要的内存引用。引入中间变量来保存中间结果，只有在最后的值计算出来时才将结果放到数组或全局变量中。

* 低级优化。结构化代码以利用硬件功能。
    - 展开循环，降低开销，并且使得进一步的优化成为可能。
    - 通过使用例如多个累积变量和重新结合等技术，找到方法提高指令级并行。
    - 用功能性的风格重写条件操作，使得编译采用条件数据传送。
    
    
### 3.实用工具：代码剖析程序 GPROF

> Unix系统提供了一个剖析程序GPROF，这个程序产生两类信息：  
  首先，它确定程序中每个函数花费了多少CPU时间。  
  其次，它计算每个函数被调用的次数，以执行调用的函数来分类。还有每个函数被哪些函数调用，自身又调用了哪些函数。

> 使用GPROF进行剖析需要3个步骤，比如源程序为prog.c。  
   1）编译： `linux> gcc -og -pg prog.c -o prog`（只要加上-pg参数即可，-og为建议的优化标志）  
   2）运行：`linux> ./prog` (会生成一个gmon.out文件供 gprof分析程序时候使用（运行比平时慢些））  
   3）剖析：`linux> gprof prog` （分析gmon.out中的数据，并显示出来）
